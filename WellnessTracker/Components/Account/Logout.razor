@page "/account/logout"
@rendermode InteractiveServer

@using Microsoft.AspNetCore.Components.Authorization
@using WellnessTracker.Services
@inject NavigationManager Nav
@inject AuthenticationStateProvider AuthStateProvider

<PageTitle>Log out</PageTitle>

<h3>Logging out...</h3>

@code {
    protected override Task OnInitializedAsync()
    {
        if (AuthStateProvider is CustomAuthenticationStateProvider customProvider)
        {
            customProvider.NotifyUserLogout();
        }

        Nav.NavigateTo("/", forceLoad: true);

        return Task.CompletedTask;
    }
}
